var L=Object.defineProperty;var I=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var B=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R=(e,t)=>{for(var n in t||(t={}))A.call(t,n)&&B(e,n,t[n]);if(I)for(var n of I(t))D.call(t,n)&&B(e,n,t[n]);return e};import{n as b,p as H,c as N,a as V,b as z}from"../vendor.017d11a9.js";const J="0.3.64",p={projectName:"vite-plugin-ssr",projectVersion:J,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr",discordInviteToolChannel:"https://discord.com/invite/qTq92FQzKb"},w=`[${p.npmPackageName}@${p.projectVersion}]`,q=`${w}[Bug]`,Y=`${w}[Wrong Usage]`,G=`${w}[Warning]`,k=2;function s(e,t){if(e)return;const n=(()=>{if(!t)return"";const o=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${p.projectName} maintainers; you can ignore this): ${o}.`})();throw b([`${q} You stumbled upon a bug in ${p.projectName}'s source code.`,`Reach out at ${p.githubRepository}/issues/new or ${p.discordInviteToolChannel} and include this error stack (the error stack is usually enough to fix the problem).`,"A maintainer will fix the bug (usually under 24 hours).",`Do not hesitate to reach out as it makes ${p.projectName} more robust.`,n].join(" "),k)}function h(e,t){if(e)return;const n=t.startsWith("[")?"":" ";throw b(`${Y}${n}${t}`,k)}function M(e){return b(`${w} ${e}`,k)}function O(e,t){e||console.warn(`${G} ${t}`)}function E(e,t,n){return typeof e=="string"?S(e.split(""),t,n).join(""):S(e,t,n)}function S(e,t,n){const r=[];let o=t>=0?t:e.length+t;s(o>=0&&o<=e.length);let i=n>=0?n:e.length+n;for(s(i>=0&&i<=e.length);!(o===i||(o===e.length&&(o=0),o===i));){const a=e[o];s(a!==void 0),r.push(a),o++}return r}function $(e){return e=X(e),Q(e,"/").pathnameWithoutBaseUrl}function K(e){return e=decodeURI(e),e.startsWith("//")?!1:!!(e.startsWith("/")||e.startsWith("http")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e==="")}function Q(e,t){s(K(e),{url:e}),e=decodeURI(e),s(t.startsWith("/"),{url:e,baseUrl:t});const[n,...r]=e.split("#");s(n!==void 0);const o=["",...r].join("#")||null;s(o===null||o.startsWith("#"));const i=o===null?"":decodeURIComponent(o.slice(1)),[a,...d]=n.split("?");s(a!==void 0,{url:e,urlWithoutSearch:a});const l=["",...d].join("?")||null;s(l===null||l.startsWith("?"),{url:e,searchString:l});const g=Object.fromEntries(Array.from(new URLSearchParams(l||""))),{origin:u,pathname:f}=Z(a);s(f.startsWith("/"),{url:e,pathnameWithBaseUrl:f}),s(u===null||e.startsWith(u),{url:e,origin:u}),e.startsWith("/")&&s(f===a.slice((u||"").length),{url:e,pathnameWithBaseUrl:f,urlWithoutSearch:a,origin:u});const{pathnameWithoutBaseUrl:P,hasBaseUrl:x}=ne(f,t);if(e.startsWith("/")||e.startsWith("http")){const F=`${u||""}${f}${l||""}${o||""}`;s(e===F,{url:e,urlRecreated:F})}return s(f.startsWith("/"),{url:e,pathnameWithBaseUrl:f}),s(P.startsWith("/"),{url:e,pathnameWithoutBaseUrl:P}),{origin:u,pathnameWithoutBaseUrl:P,pathnameWithBaseUrl:f,hasBaseUrl:x,search:g,searchString:l,hash:i,hashString:o}}function X(e){return e||(e=window.location.href),e}function Z(e){var t;let n,r;try{const o=new URL(e);n=o.origin,r=o.pathname}catch{n=null;const i=typeof window!="undefined"&&((t=window==null?void 0:window.document)===null||t===void 0?void 0:t.baseURI);s(i||!e.startsWith(".")),s(i||e.startsWith("/")||e.startsWith("?"));const a=i||"http://fake-origin.example.org";r=new URL(e,a).pathname}return n&&(n=decodeURI(n)),r=decodeURI(r),s(r.startsWith("/"),{url:e,pathname:r}),s(r===r.split("?")[0].split("#")[0],{pathname:r}),{origin:n,pathname:r}}function ee(e){s(e.startsWith("/"))}function te(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function ne(e,t){te(e),ee(t);let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathnameWithoutBaseUrl:e,hasBaseUrl:!0};let r=t,o=$(n);return t.endsWith("/")&&o===E(t,0,-1)&&(r=E(t,0,-1),s(o===r)),n.startsWith(r)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathnameWithoutBaseUrl:n,hasBaseUrl:!0}):{pathnameWithoutBaseUrl:e,hasBaseUrl:!1}}function y(e,t){Object.assign(e,t)}function v(e){return e instanceof Function||typeof e=="function"}function U(e){return typeof e=="object"&&e!==null}function re(e){return(t,n)=>{const r=e(t),o=e(n);return r===o?0:r<o?-1:1}}function oe(){return typeof window!="undefined"&&typeof window.scrollY=="number"}function c(e,t,n="unknown"){if(!(typeof e=="object"&&e!==null&&t in e))return!1;if(n==="unknown")return!0;const o=e[t];return n==="array"?Array.isArray(o):n==="string[]"?Array.isArray(o)&&o.every(i=>typeof i=="string"):n==="function"?v(o):Array.isArray(n)?typeof o=="string"&&n.includes(o):n==="null"?o===null:typeof o===n}function se(e,t){s(e.startsWith("/")),s(t.startsWith("/")),s(!e.startsWith("\\")),s(!t.startsWith("\\"));let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),o=t.slice(n),i=r.split("/").length,a=o.split("/").length;return i+a}function ie(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}fe();let m;function ae(e){s(c(e,".page")),m=e}async function le(e){s(c(m,".page"));const t=r=>Object.entries(r).map(([o,i])=>({filePath:o,loadFile:i}));return{".page":t(m[".page"]),".page.route":t(m[".page.route"]),".page.server":t(m[".page.server"]),".page.client":t(m[".page.client"])}}function ce(e,t){if(e=e.filter(({filePath:r})=>(s(r.startsWith("/")),s(t.startsWith("/")),s(!r.includes("\\")),s(!t.includes("\\")),r.startsWith(`${t}.page.`))),e.length===0)return null;h(e.length===1,"Conflicting "+e.map(({filePath:r})=>r).join(" "));const n=e[0];return s(n),n}function ue(e){return e.filter(({filePath:n})=>(s(n.startsWith("/")),s(!n.includes("\\")),n.includes("/_default")))}function fe(){const e=Symbol(),t=oe()?window:global;s(!t[e]),t[e]=!0}function he(e,t){const n=ue(e);return n.sort(re(({filePath:r})=>r.startsWith(t)?-1:se(t,r))),n[0]||null}const de="modulepreload",j={},pe="/",_=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${pe}${r}`,r in j)return;j[r]=!0;const o=r.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":de,o||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),o)return new Promise((d,l)=>{a.addEventListener("load",d),a.addEventListener("error",l)})})).then(()=>t())},ge={".page":{"/pages/all.page.vue":()=>_(()=>import("../all.page.9a7fe2eb.js"),["assets/all.page.9a7fe2eb.js","assets/all.page.d432a709.css","assets/vendor.017d11a9.js"])},".page.client":{"/pages/all.page.client.js":()=>_(()=>Promise.resolve().then(function(){return je}),void 0)},".page.server":{"/pages/all.page.server.js":()=>_(()=>import("../all.page.server.66c34ab7.js"),[])},".page.route":{"/pages/all.page.route.js":()=>_(()=>import("../all.page.route.8b6470e3.js"),[])}};ae(ge);function me(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>ie(n,r)).forEach(([n,r])=>{e[n]=r})}function _e(e){return s("Page"in e),s(U(e.pageExports)),s([!0,!1].includes(e.isHydration)),Pe(e),me(e),s([!0,!1].includes(e._comesDirectlyFromServer)),e._comesDirectlyFromServer?We(e):e}const ye=["then","toJSON"],Re=["_pageId","_serverSideErrorWhileStreaming"];let W=!1;function We(e){return new Proxy(e,{get:n});function t(r){return!(r in e||ye.includes(r)||typeof r=="symbol"||typeof r!="string"||r.startsWith("__v_"))}function n(r,o){return W!==!1&&W!==o&&we(e._pageContextRetrievedFromServer,o,t(o)),W=o,window.setTimeout(()=>{W=!1},0),e[o]}}function we(e,t,n){if(!n||e===null)return;const r=Object.keys(e).filter(o=>!Re.includes(o));h(!1,[`\`pageContext.${t}\` is not available in the browser.`,`Make sure that \`passToClient.includes('${t}')\`.`,`(Currently \`passToClient\` is \`[${r.map(o=>`'${o}'`).join(", ")}]\`.)`,"More infos at https://vite-plugin-ssr.com/passToClient"].join(" "))}function Pe(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function ve(e,{hook:t,errorMessagePrefix:n}){if(!n){s(t);const{hookName:r,hookFilePath:o}=t;s(o.startsWith("/")),s(!r.endsWith(")")),n=`The \`pageContext\` provided by the \`${r}()\` hook (${o})`}h(U(e),`${n} should be an object.`),h(!("_objectCreatedByVitePluginSsr"in e),`${n} should not be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),s(!("_pageId"in e))}function C(e,t,n){if(n)h(c(e,"onBeforeRender"),`${t} should \`export { onBeforeRender }\`.`);else if(!c(e,"onBeforeRender"))return null;return h(v(e.onBeforeRender),`The \`export { onBeforeRender }\` of ${t} should be a function.`),{async callHook(o){s(v(e.onBeforeRender));const i=await e.onBeforeRender(o);if(i==null)return{pageContext:{}};h(c(i,"pageContext"),`The \`onBeforeRender()\` hook exported by ${t} should return \`undefined\`, \`null\`, or \`{ pageContext: { /*...*/ }}\` (a JavaScript object with a single key \`pageContext\`).`);const a=i.pageContext;return ve(a,{hook:{hookName:"onBeforeRender",hookFilePath:t}}),{pageContext:a}}}}async function be(e){let t=null,n={};const[r,o]=await Promise.all([(async()=>{const i=ce(e._allPageFiles[".page"],e._pageId);if(i===null)return null;const{filePath:a,loadFile:d}=i,l=await d(),g={};h(c(l,"Page")||c(l,"default"),`${a} should have a \`export { Page }\` or \`export default\`.`),n=l,t=n.Page||n.default;const u=C(l,a);return c(l,"skipOnBeforeRenderDefaultHook")&&(h(c(l,"skipOnBeforeRenderDefaultHook","boolean"),`${a} has \`export { skipOnBeforeRenderDefaultHook }\` but \`skipOnBeforeRenderDefaultHook\` should be a boolean.`),g.skipOnBeforeRenderDefaultHook=l.skipOnBeforeRenderDefaultHook),{filePath:a,onBeforeRenderHook:u,fileExports:g}})(),(async()=>{const i=he(e._allPageFiles[".page"],e._pageId);if(i===null)return null;const{filePath:a,loadFile:d}=i,l=await d(),g=C(l,a,!0);return{filePath:a,onBeforeRenderHook:g}})()]);return{Page:t,pageExports:n,pageIsomorphicFile:r,pageIsomorphicFileDefault:o}}async function ke(e){const t={},n=await le();y(t,{_allPageFiles:n});const{Page:r,pageExports:o,pageIsomorphicFile:i,pageIsomorphicFileDefault:a}=await be(R(R({},e),t));return y(t,{Page:r,pageExports:o,_pageIsomorphicFile:i,_pageIsomorphicFileDefault:a}),t}function $e(){var e;const t=(e=document.getElementById("vite-plugin-ssr_pageContext"))===null||e===void 0?void 0:e.textContent;h(t,"Client-side `pageContext` missing. Make sure that `injectAssets()` is applied to the HTML, see https://vite-plugin-ssr.com/injectAssets");const n=H(t);s(c(n,"pageContext","object"));const{pageContext:r}=n;if(s(c(r,"_pageId","string")),"_serverSideErrorWhileStreaming"in r)throw M("An error occurred on the server while rendering/streaming to HTML. Check your server logs.");return y(r,{_pageContextRetrievedFromServer:R({},r),_comesDirectlyFromServer:!0}),r}const T=$();async function Fe(){let e=$e();y(e,{isHydration:!0});const t=await ke(e);return y(e,t),e._pageIsomorphicFile&&O(!e._pageIsomorphicFile.fileExports.onBeforeRender,`You are using Server Routing but ${e._pageId} has a \`onBeforeRender()\` hook defined in a \`.page.js\` file (${e._pageIsomorphicFile.filePath}). This doesn't make sense and you should define \`onBeforeRender()\` in a \`.page.server.js\` file instead. See https://vite-plugin-ssr.com/onBeforeRender-isomorphic#server-routing`),Ie(),_e(e)}function Ie(){const e=$();O(T===e,`\`getPage()\` returned page information for URL \`${T}\` instead of \`${e}\`. If you want to be able to change the URL (e.g. with \`window.history.pushState\`) while using \`getPage()\`, then create a new GitHub issue.`)}function Be(){return N({history:V(),routes:[{path:"/",component:()=>_(()=>import("../Home.91d2b2ca.js"),["assets/Home.91d2b2ca.js","assets/Home.357906ab.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.017d11a9.js"])},{path:"/about",component:()=>_(()=>import("../About.63183c43.js"),["assets/About.63183c43.js","assets/About.b51b67cf.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.017d11a9.js"])}]})}function Ee({Page:e}){const t=z(e),n=Be();return t.use(n),{app:t,router:n}}Se();async function Se(){const e=await Fe(),{Page:t}=e,{app:n,router:r}=Ee({Page:t});await r.isReady(),n.mount("#app")}var je=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"});
